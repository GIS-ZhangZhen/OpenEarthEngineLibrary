//exports.addRef=;

function convert2Terminals(dic){
  var temp={};
  for(var key in dic){
    if(key=='internal')
      continue;
    if(typeof(dict[key][key])=='function'){
      temp[key]=dict[key][key];
    }else{
      temp[key]=convert2Terminals(dict[key]);
    }
  }
  return temp;
}

function setInternal(dic,internal){
  for(var key in dic){
    if(key=='internal')
      continue;
    if(typeof(dict[key][key])=='function'){
      dict[key].internal=internal;
    }else{
      setInternal(dic[key],internal);
    }
  }
}

exports.setupLibrary=function(libs,exp){
  setInternal(libs,exp)
  for(var key in libs.internal){
    libs[key].internal=libs.internal;
  }
  libs.internal.addRef=function(ref){libs.ref.push(ref)}
  
  var teminals=convert2Terminals();
  
  
  
  return teminals;
};

